<%@page import="Account.AccountDTO"%>
<%@page import="Account.AccountDAO"%>
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ page trimDirectiveWhitespaces="true" %> <%-- XML태그 시작전의 공백 제거 --%>
<%
String login_id = request.getParameter("login_id");
String login_pw = request.getParameter("login_pw");
String result = "";

AccountDAO accountDAO = new AccountDAO();

String loginResult = accountDAO.login(login_id, login_pw);

if ("success".equals(loginResult)) {
    // 로그인 성공 시, 사용자 ID를 쿠키에 저장
    response.addCookie(new javax.servlet.http.Cookie("userId", login_id));
}

// JSON 응답 생성
response.setContentType("application/json");
response.setCharacterEncoding("UTF-8");
response.getWriter().write("{\"status\": \"" + loginResult + "\", \"userId\": \"" + login_id + "\"}");
%>
<%=result %>


